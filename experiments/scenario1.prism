mdp

const double current_prob = 0.6;

const int done = 11;

const int following = 5;

const int found = 4;

const int inspect = 10;

const int max_visib = 10;

const int min_visib = 1;

const int recover_following = 10;

const int recover_found = 9;

const int recover_high = 6;

const int recover_low = 8;

const int recover_med = 7;

const int search_high = 1;

const int search_low = 3;

const int search_med = 2;

const int start = 0;

formula _active = true;

formula _robot_active = true;

formula _robot_navigation_active = true;

formula _robot_pipeline_inspection_active = true;

formula _robot_navigation_high_active = _robot_navigation_high = 1;

formula _robot_navigation_low_active = _robot_navigation_low = 1;

formula _robot_navigation_med_active = _robot_navigation_med = 1;

formula _robot_pipeline_inspection_follow_active = _robot_pipeline_inspection_follow = 1;

formula _robot_pipeline_inspection_search_active = _robot_pipeline_inspection_search = 1;

module _environment
    _water_visib : [min_visib .. max_visib] init round((max_visib - min_visib) / 2);
    
    [step] _active -> current_prob:(_water_visib' = _water_visib = min_visib ? min_visib : _water_visib - 1) + (1 - current_prob) / 2:(_water_visib' = _water_visib = max_visib ? max_visib : _water_visib + 1) + (1 - current_prob) / 2:true;
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active -> current_prob:(_water_visib' = _water_visib = min_visib ? min_visib : _water_visib - 1) + (1 - current_prob) / 2:(_water_visib' = _water_visib = max_visib ? max_visib : _water_visib + 1) + (1 - current_prob) / 2:true;
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active -> current_prob:(_water_visib' = _water_visib = min_visib ? min_visib : _water_visib - 1) + (1 - current_prob) / 2:(_water_visib' = _water_visib = max_visib ? max_visib : _water_visib + 1) + (1 - current_prob) / 2:true;
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active -> current_prob:(_water_visib' = _water_visib = min_visib ? min_visib : _water_visib - 1) + (1 - current_prob) / 2:(_water_visib' = _water_visib = max_visib ? max_visib : _water_visib + 1) + (1 - current_prob) / 2:true;
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active -> current_prob:(_water_visib' = _water_visib = min_visib ? min_visib : _water_visib - 1) + (1 - current_prob) / 2:(_water_visib' = _water_visib = max_visib ? max_visib : _water_visib + 1) + (1 - current_prob) / 2:true;
endmodule

module _auv
    _s : [0 .. 11] init start;
    _d_insp : [0 .. inspect] init 0;
    
    [step] _active & (_s = start & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = start & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = start & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = start & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = start & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step] _active & (_s = start & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = start & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = start & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = start & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = start & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step] _active & (_s = start & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = start & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = start & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = start & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = start & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step] _active & (_s = search_high & _robot_navigation_high_active) -> 0.59:(_s' = found) + 0.4:(_s' = search_high) + 1.0e-2:(_s' = recover_high);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_high & _robot_navigation_high_active) -> 0.59:(_s' = found) + 0.4:(_s' = search_high) + 1.0e-2:(_s' = recover_high);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_high & _robot_navigation_high_active) -> 0.59:(_s' = found) + 0.4:(_s' = search_high) + 1.0e-2:(_s' = recover_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_high & _robot_navigation_high_active) -> 0.59:(_s' = found) + 0.4:(_s' = search_high) + 1.0e-2:(_s' = recover_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_high & _robot_navigation_high_active) -> 0.59:(_s' = found) + 0.4:(_s' = search_high) + 1.0e-2:(_s' = recover_high);
    [step] _active & (_s = search_high & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_high & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_high & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_high & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_high & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step] _active & (_s = search_high & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_high & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_high & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_high & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_high & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step] _active & (_s = search_med & _robot_navigation_med_active) -> 0.48:(_s' = found) + 0.5:(_s' = search_med) + 2.0e-2:(_s' = recover_med);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_med & _robot_navigation_med_active) -> 0.48:(_s' = found) + 0.5:(_s' = search_med) + 2.0e-2:(_s' = recover_med);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_med & _robot_navigation_med_active) -> 0.48:(_s' = found) + 0.5:(_s' = search_med) + 2.0e-2:(_s' = recover_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_med & _robot_navigation_med_active) -> 0.48:(_s' = found) + 0.5:(_s' = search_med) + 2.0e-2:(_s' = recover_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_med & _robot_navigation_med_active) -> 0.48:(_s' = found) + 0.5:(_s' = search_med) + 2.0e-2:(_s' = recover_med);
    [step] _active & (_s = search_med & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_med & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_med & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_med & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_med & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step] _active & (_s = search_med & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_med & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_med & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_med & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_med & _robot_navigation_low_active) -> 1:(_s' = search_low);
    [step] _active & (_s = search_low & _robot_navigation_low_active) -> 0.42:(_s' = found) + 0.55:(_s' = search_low) + 3.0e-2:(_s' = recover_low);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_low & _robot_navigation_low_active) -> 0.42:(_s' = found) + 0.55:(_s' = search_low) + 3.0e-2:(_s' = recover_low);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_low & _robot_navigation_low_active) -> 0.42:(_s' = found) + 0.55:(_s' = search_low) + 3.0e-2:(_s' = recover_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_low & _robot_navigation_low_active) -> 0.42:(_s' = found) + 0.55:(_s' = search_low) + 3.0e-2:(_s' = recover_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_low & _robot_navigation_low_active) -> 0.42:(_s' = found) + 0.55:(_s' = search_low) + 3.0e-2:(_s' = recover_low);
    [step] _active & (_s = search_low & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_low & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_low & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_low & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_low & _robot_navigation_high_active) -> 1:(_s' = search_high);
    [step] _active & (_s = search_low & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = search_low & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = search_low & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = search_low & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = search_low & _robot_navigation_med_active) -> 1:(_s' = search_med);
    [step] _active & _s = found -> 0.97:(_s' = following) + 3.0e-2:(_s' = recover_found);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = found -> 0.97:(_s' = following) + 3.0e-2:(_s' = recover_found);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = found -> 0.97:(_s' = following) + 3.0e-2:(_s' = recover_found);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = found -> 0.97:(_s' = following) + 3.0e-2:(_s' = recover_found);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = found -> 0.97:(_s' = following) + 3.0e-2:(_s' = recover_found);
    [step] _active & (_s = following & _d_insp < inspect) -> 0.97:(_s' = following) & (_d_insp' = _d_insp + 1) + 3.0e-2:(_s' = recover_following);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = following & _d_insp < inspect) -> 0.97:(_s' = following) & (_d_insp' = _d_insp + 1) + 3.0e-2:(_s' = recover_following);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = following & _d_insp < inspect) -> 0.97:(_s' = following) & (_d_insp' = _d_insp + 1) + 3.0e-2:(_s' = recover_following);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = following & _d_insp < inspect) -> 0.97:(_s' = following) & (_d_insp' = _d_insp + 1) + 3.0e-2:(_s' = recover_following);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = following & _d_insp < inspect) -> 0.97:(_s' = following) & (_d_insp' = _d_insp + 1) + 3.0e-2:(_s' = recover_following);
    [step] _active & (_s = following & _d_insp = inspect) -> (_s' = done);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & (_s = following & _d_insp = inspect) -> (_s' = done);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & (_s = following & _d_insp = inspect) -> (_s' = done);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & (_s = following & _d_insp = inspect) -> (_s' = done);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & (_s = following & _d_insp = inspect) -> (_s' = done);
    [step] _active & _s = recover_high -> 0.5:(_s' = recover_high) + 0.5:(_s' = search_high);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = recover_high -> 0.5:(_s' = recover_high) + 0.5:(_s' = search_high);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = recover_high -> 0.5:(_s' = recover_high) + 0.5:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = recover_high -> 0.5:(_s' = recover_high) + 0.5:(_s' = search_high);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = recover_high -> 0.5:(_s' = recover_high) + 0.5:(_s' = search_high);
    [step] _active & _s = recover_med -> 0.5:(_s' = recover_med) + 0.5:(_s' = search_med);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = recover_med -> 0.5:(_s' = recover_med) + 0.5:(_s' = search_med);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = recover_med -> 0.5:(_s' = recover_med) + 0.5:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = recover_med -> 0.5:(_s' = recover_med) + 0.5:(_s' = search_med);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = recover_med -> 0.5:(_s' = recover_med) + 0.5:(_s' = search_med);
    [step] _active & _s = recover_low -> 0.5:(_s' = recover_low) + 0.5:(_s' = search_low);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = recover_low -> 0.5:(_s' = recover_low) + 0.5:(_s' = search_low);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = recover_low -> 0.5:(_s' = recover_low) + 0.5:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = recover_low -> 0.5:(_s' = recover_low) + 0.5:(_s' = search_low);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = recover_low -> 0.5:(_s' = recover_low) + 0.5:(_s' = search_low);
    [step] _active & _s = recover_found -> 0.5:(_s' = recover_found) + 0.5:(_s' = found);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = recover_found -> 0.5:(_s' = recover_found) + 0.5:(_s' = found);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = recover_found -> 0.5:(_s' = recover_found) + 0.5:(_s' = found);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = recover_found -> 0.5:(_s' = recover_found) + 0.5:(_s' = found);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = recover_found -> 0.5:(_s' = recover_found) + 0.5:(_s' = found);
    [step] _active & _s = recover_following -> 0.5:(_s' = recover_following) + 0.5:(_s' = following);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = recover_following -> 0.5:(_s' = recover_following) + 0.5:(_s' = following);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = recover_following -> 0.5:(_s' = recover_following) + 0.5:(_s' = following);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = recover_following -> 0.5:(_s' = recover_following) + 0.5:(_s' = following);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = recover_following -> 0.5:(_s' = recover_following) + 0.5:(_s' = following);
    [step] _active & _s = done -> 1:(_s' = done);
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _active & _s = done -> 1:(_s' = done);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] _active & _s = done -> 1:(_s' = done);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] _active & _s = done -> 1:(_s' = done);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] _active & _s = done -> 1:(_s' = done);
endmodule

module _controller
    _robot_navigation_high : [0 .. 1] init 0;
    _robot_navigation_low : [0 .. 1] init 1;
    _robot_navigation_med : [0 .. 1] init 0;
    _robot_pipeline_inspection_follow : [0 .. 1] init 0;
    _robot_pipeline_inspection_search : [0 .. 1] init 1;
    
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] _s = found & _robot_pipeline_inspection_search_active -> (_robot_pipeline_inspection_search' = 0) & (_robot_pipeline_inspection_follow' = 1) & (_robot_navigation_low' = 1) & (_robot_navigation_med' = 0) & (_robot_navigation_high' = 0);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] ((_s != found & _robot_pipeline_inspection_search_active) & _water_visib < (max_visib - min_visib) / 3) & (_robot_pipeline_inspection_follow = 1 => true) -> (_robot_navigation_low' = 1) & (_robot_navigation_high' = 0) & (_robot_navigation_med' = 0);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] (((_s != found & _robot_pipeline_inspection_search_active) & (max_visib - min_visib) / 3 <= _water_visib) & _water_visib < (2 * (max_visib - min_visib)) / 3) & (_robot_pipeline_inspection_follow = 1 => true) -> (_robot_navigation_low' = 1) & (_robot_navigation_med' = 0) & (_robot_navigation_high' = 0);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] (((_s != found & _robot_pipeline_inspection_search_active) & (max_visib - min_visib) / 3 <= _water_visib) & _water_visib < (2 * (max_visib - min_visib)) / 3) & (_robot_pipeline_inspection_follow = 1 => false) -> (_robot_navigation_med' = 1) & (_robot_navigation_low' = 0) & (_robot_navigation_high' = 0);
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] ((_s != found & _robot_pipeline_inspection_search_active) & (2 * (max_visib - min_visib)) / 3 <= _water_visib) & (_robot_pipeline_inspection_follow = 1 => true) -> (_robot_navigation_low' = 1) & (_robot_navigation_med' = 0) & (_robot_navigation_high' = 0);
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] ((_s != found & _robot_pipeline_inspection_search_active) & (2 * (max_visib - min_visib)) / 3 <= _water_visib) & (_robot_pipeline_inspection_follow = 1 => false) -> (_robot_navigation_med' = 1) & (_robot_navigation_low' = 0) & (_robot_navigation_high' = 0);
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] ((_s != found & _robot_pipeline_inspection_search_active) & (2 * (max_visib - min_visib)) / 3 <= _water_visib) & (_robot_pipeline_inspection_follow = 1 => false) -> (_robot_navigation_high' = 1) & (_robot_navigation_low' = 0) & (_robot_navigation_med' = 0);
    [step] _robot_pipeline_inspection_follow_active -> true;
endmodule

rewards "energy"
    _s = following : 1;
    _s = found & _robot_navigation_low_active : 1;
    _s = search_low & _robot_navigation_low_active : 1;
    _s = search_med & _robot_navigation_med_active : 1;
    _s = search_high & _robot_navigation_high_active : 1;
    _s = start : 1;
    _s = found & _robot_navigation_med_active : 2;
    _s = found & _robot_navigation_high_active : 4;
    _s = search_low & _robot_navigation_med_active : 2;
    _s = search_low & _robot_navigation_high_active : 4;
    _s = search_med & _robot_navigation_low_active : 2;
    _s = search_med & _robot_navigation_high_active : 2;
    _s = search_high & _robot_navigation_low_active : 4;
    _s = search_high & _robot_navigation_med_active : 2;
    _s = recover_following : 2;
    _s = recover_found : 2;
    _s = recover_low : 2;
    _s = recover_med : 2;
    _s = recover_high : 2;
endrewards

rewards "time"
    [step] true : 1;
    [step_robot_pipeline_inspection_follow_activate_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate_robot_pipeline_inspection_search_deactivate] true : 1;
    [step_robot_navigation_high_activate_robot_navigation_low_deactivate_robot_navigation_med_deactivate] true : 1;
    [step_robot_navigation_high_deactivate_robot_navigation_low_activate_robot_navigation_med_deactivate] true : 1;
    [step_robot_navigation_high_deactivate_robot_navigation_low_deactivate_robot_navigation_med_activate] true : 1;
endrewards
